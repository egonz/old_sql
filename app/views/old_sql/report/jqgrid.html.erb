<%col_names = jqgrid_col_names%>

<% if col_names.nil? || col_names=='null' %>
The query returned no data.
<% else %>
<!-- TODO move these to the head -->
<%= stylesheet_link_tag "old_sql/jqgrid/ui.jqgrid.css" %>
<%= javascript_include_tag "old_sql/jqgrid/jquery.jqGrid.min.js" %>
<%= javascript_include_tag "old_sql/jqgrid/ui.multiselect.js" %>

<script>
jQuery(document).ready(function(){
  jQuery("#rowed1").jqGrid({
    url:"http://<%=@host%>:<%=@port%>/sql/reports/query.json/?report=<%=@report_name%>&report_sql=<%=@report_sql%>&start_date=<%=@start_date%>&end_date=<%=@end_date%>&query=<%=@query%>&db=<%=@db%>",
  	datatype: "json",
  	pager: false,
    colNames: <%=col_names%>,
    colModel: <%=jqgrid_col_model%>,
    rowNum: <%=@row_num%>,
    rowList: [10,20,30],
    width: <%=@width%>,
	height: <%=@height%>,
	cellEdit: true,
    caption: "<%=@caption%> Report"
  });
});
</script>

<table id="rowed1"></table>
<% end %>